<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ximik">
    <meta name="theme-color" content="#302b63">
    
    <!-- PWA Manifest с измененным названием -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlhpbWlrIiwKICAic2hvcnRfbmFtZSI6ICJYaW1payIsCiAgImRlc2NyaXB0aW9uIjogItCQ0LLRgNC40LLQvtC70YzQvdC40Y8g0YDQsNCx0L7RgNCw0L3QvdGL0YUg0L/QvtC70YPRh9C10L3QuNC1INC80L7QttC10YMiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzMwMmI2MyIsCiAgInRoZW1lX2NvbG9yIjogIiMzMDJiNjMiLAogICJvcmllbnRhdGlvbiI6ICJwb3J0cmFpdCIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyNmZmYnJTNFJTNDcGF0aCBkPSdNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6JyUzRSUzQy9wYXRoJTNFJTNDcGF0aCBkPSdNMTIuNSA3SDExdjZsNS4yNSAzLjE1Ljc1LTEuMjNMMTIgMTIuMjVWNzonJTNFJTNDL3BhdGglM0UlM0Mvc3ZnJTNFIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPScjZmZmJyUzRSUzQ3BhdGggZD0nTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiclM0UlM0MvcGF0aCUzRSUzQ3BhdGggZD0nTDEyLjUgN0gxMXY2bDUuMjUgMy4xNS43NS0xLjIzTDEyIDEyLjI1Vjd6JyUzRSUzQy9wYXRoJTNFJTNDL3N2ZyUzRSIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0sCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nI2ZmZiclM0UlM0NwYXRoIGQ9J0wxMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0wIDE4Yy00LjQxIDAtOC0zLjU5LTgtOHMzLjU5LTggOC04IDggMy41OSA4IDgtMy41OSA4LTggOHonJTNFJTNDL3BhdGglM0UlM0NwYXRoIGQ9J0wxMi41IDdIMTF2Nmw1LjI1IDMuMTUuNzUtMS4yM0wxMiAxMi4yNVY3eiclM0UlM0MvcGF0aCUzRSUzQy9zdmclM0UiLAogICAgICAic2l6ZXMiOiAiMTUzNngxNTM2IiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdLAogICJzY3JlZW5zaG90cyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEyOCAxMjgnIGZpbGw9JyMzMDJiNjMnJTNFJTNDcmVjdCB3aWR0aD0nMTI4JyBoZWlnaHQ9JzEyOCcvJTNFJTNDdGV4dCB4PSc2NCcgeT0nNjQnIGZvbnQtZmFtaWx5PSdBcmlhbCcgZm9udC1zaXplPSc0MCcgZmlsbD0nI2ZmZicgdGV4dC1hbmNob3I9J21pZGRsZScgZHk9Jy4zZW0nJTNFWGltaWs8L3RleHQlM0UlM0Mvc3ZnJTNFIiwKICAgICAgInNpemVzIjogIjEyOHgxMjgiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z'/><path d='M12.5 7H11v6l5.25 3.15.75-1.23L12 12.25V7z'/></svg>">
    
    <title>Ximik</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        /* Переменные для тем */
        :root {
            --bg-primary: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            --bg-secondary: rgba(255, 255, 255, 0.08);
            --bg-tertiary: rgba(0, 0, 0, 0.3);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --border-color: rgba(255, 255, 255, 0.15);
            --shadow-color: rgba(0, 0, 0, 0.4);
            --accent-gradient: linear-gradient(135deg, #00d4ff, #7c3aed);
            --result-bg-1: linear-gradient(135deg, rgba(0, 212, 255, 0.25), rgba(124, 58, 237, 0.25));
            --result-bg-2: linear-gradient(135deg, rgba(255, 193, 7, 0.25), rgba(255, 152, 0, 0.25));
            --result-bg-3: linear-gradient(135deg, rgba(255, 0, 110, 0.25), rgba(124, 58, 237, 0.25));
            --result-text-1: #00d4ff;
            --result-text-2: #ffc107;
            --result-text-3: #ff006e;
            --transition-speed: 0.2s;
            --icon-size: 24px;
            --touch-target: 48px;
        }
        .light-theme {
            --bg-primary: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --bg-secondary: rgba(255, 255, 255, 0.9);
            --bg-tertiary: rgba(0, 0, 0, 0.05);
            --text-primary: #2d3748;
            --text-secondary: rgba(45, 55, 72, 0.7);
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.1);
            --accent-gradient: linear-gradient(135deg, #667eea, #764ba2);
            --result-bg-1: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
            --result-bg-2: linear-gradient(135deg, rgba(255, 193, 7, 0.15), rgba(255, 152, 0, 0.15));
            --result-bg-3: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(118, 75, 162, 0.15));
            --result-text-1: #667eea;
            --result-text-2: #f59e0b;
            --result-text-3: #ec4899;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            transition: background-color var(--transition-speed), color var(--transition-speed), border-color var(--transition-speed), box-shadow var(--transition-speed);
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: var(--bg-primary);
            min-height: 100vh;
            padding: 15px;
            position: relative;
            overflow-x: hidden;
            color: var(--text-primary);
            touch-action: manipulation;
        }
        
        /* Мобильная оптимизация */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 16px;
            }
            
            button, select, .tab {
                min-height: var(--touch-target);
                min-width: var(--touch-target);
            }
            
            *:hover {
                transform: none !important;
            }
        }
        
        /* Упрощенный фон без анимации */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        .light-theme body::before {
            background: 
                radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(118, 75, 162, 0.03) 0%, transparent 50%);
        }
        
        /* Упрощенные частицы */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 20s infinite linear;
        }
        
        .light-theme .particle {
            background: rgba(0, 0, 0, 0.15);
        }
        
        @keyframes float {
            from {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 0.5;
            }
            90% {
                opacity: 0.5;
            }
            to {
                transform: translateY(-100vh) translateX(50px);
                opacity: 0;
            }
        }
        
        header {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            text-align: center;
            padding: 25px 20px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 
                0 15px 30px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            font-weight: 800;
            font-size: 24px;
            letter-spacing: 1px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        /* Упрощенный shimmer эффект */
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 4s infinite;
        }
        
        .light-theme header::before {
            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.05), transparent);
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .container {
            background: var(--bg-secondary);
            backdrop-filter: blur(20px);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 
                0 20px 40px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            max-width: 100%;
            margin: 0 auto;
            position: relative;
        }
        
        h2 {
            color: var(--text-primary);
            margin: 0 0 25px;
            font-size: 20px;
            font-weight: 700;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--accent-gradient);
            border-radius: 2px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 25px;
            gap: 8px;
            border-radius: 16px;
            padding: 6px;
            background: var(--bg-tertiary);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border-color);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .tab {
            padding: 16px 20px;
            cursor: pointer;
            background: transparent;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            flex: 1;
            transition: all 0.2s ease;
            font-size: 14px;
            color: var(--text-secondary);
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            min-height: 50px;
        }
        
        .tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--accent-gradient);
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: -1;
            border-radius: 12px;
        }
        
        .tab.active {
            color: var(--text-primary);
            box-shadow: 
                0 5px 15px rgba(124, 58, 237, 0.3),
                0 0 10px rgba(124, 58, 237, 0.2);
        }
        
        .tab.active::before {
            opacity: 1;
        }
        
        .tab:active {
            transform: scale(0.98);
        }
        
        .tab-content {
            display: none;
            animation: fadeInUp 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        label {
            display: block;
            margin: 20px 0 10px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 15px;
            letter-spacing: 0.3px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .icon {
            font-size: var(--icon-size);
            display: inline-block;
            vertical-align: middle;
        }
        
        select {
            width: 100%;
            padding: 16px 20px;
            font-size: 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            margin: 8px 0;
            transition: all 0.2s ease;
            background: var(--bg-tertiary);
            backdrop-filter: blur(15px);
            color: var(--text-primary);
            appearance: none;
            cursor: pointer;
            position: relative;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.8)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            padding-right: 45px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
            min-height: 50px;
        }
        
        .light-theme select {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='rgba(0,0,0,0.6)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        select:focus {
            border-color: #00d4ff;
            outline: none;
            box-shadow: 
                0 0 0 3px rgba(0, 212, 255, 0.2),
                inset 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        select:active {
            transform: scale(0.99);
        }
        
        select option {
            background: #1a1a2e;
            color: #ffffff;
            padding: 12px;
        }
        
        .light-theme select option {
            background: #ffffff;
            color: #2d3748;
        }
        
        .result, .remaining, .result-secondary {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 700;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            box-shadow: 
                0 10px 25px var(--shadow-color),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-direction: column;
        }
        
        .result {
            background: var(--result-bg-1);
            color: var(--result-text-1);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        
        .remaining {
            background: var(--result-bg-2);
            color: var(--result-text-2);
            border: 1px solid rgba(255, 193, 7, 0.3);
        }
        
        .result-secondary {
            background: var(--result-bg-3);
            color: var(--result-text-3);
            border: 1px solid rgba(255, 0, 110, 0.3);
        }
        
        /* Упрощенный shimmer для результатов */
        .result::before, .remaining::before, .result-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: resultShimmer 3s infinite;
        }
        
        .light-theme .result::before, 
        .light-theme .remaining::before, 
        .light-theme .result-secondary::before {
            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.03), transparent);
        }
        
        @keyframes resultShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .author {
            text-align: center;
            margin-top: 25px;
            font-size: 13px;
            color: var(--text-secondary);
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            letter-spacing: 0.5px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .mobile-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            padding: 15px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .light-theme .mobile-controls {
            background: rgba(255, 255, 255, 0.9);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .mobile-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--accent-gradient);
            border: none;
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
        }
        
        .mobile-btn:active {
            transform: scale(0.95);
        }
        
        @media (max-width: 768px) {
            .theme-toggle, .info-btn {
                display: none;
            }
            
            .mobile-controls {
                display: flex;
            }
            
            .container {
                margin-bottom: 100px;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-controls {
                display: none;
            }
        }
        
        .theme-toggle {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: var(--accent-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 
                0 10px 25px rgba(124, 58, 237, 0.4),
                0 0 20px rgba(124, 58, 237, 0.2);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(20px);
            z-index: 100;
            transition: all 0.2s ease;
        }
        
        .light-theme .theme-toggle {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 
                0 10px 25px rgba(102, 126, 234, 0.3),
                0 0 20px rgba(102, 126, 234, 0.2);
        }
        
        .theme-toggle:active {
            transform: scale(0.95);
        }
        
        .theme-toggle i {
            font-size: 28px;
            color: #ffffff;
        }
        
        .info-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--accent-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 
                0 10px 25px rgba(124, 58, 237, 0.4),
                0 0 20px rgba(124, 58, 237, 0.2);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(20px);
            z-index: 100;
            transition: all 0.2s ease;
        }
        
        .light-theme .info-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 
                0 10px 25px rgba(102, 126, 234, 0.3),
                0 0 20px rgba(102, 126, 234, 0.2);
        }
        
        .info-btn:active {
            transform: scale(0.95);
        }
        
        .info-btn i {
            font-size: 28px;
            color: #ffffff;
        }
        
        .info-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(15px);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .light-theme .info-modal {
            background: rgba(255, 255, 255, 0.9);
        }
        
        .info-content {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.95) 0%, rgba(16, 16, 30, 0.95) 100%);
            backdrop-filter: blur(20px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.5),
                0 0 60px rgba(124, 58, 237, 0.2);
            border: 1px solid var(--border-color);
            max-width: 500px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            color: var(--text-primary);
            position: relative;
        }
        
        .light-theme .info-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 247, 250, 0.95) 100%);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 0 60px rgba(102, 126, 234, 0.1);
        }
        
        .info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            z-index: 1;
        }
        
        .info-header h3 {
            color: var(--text-primary);
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--text-primary);
            transition: all 0.2s ease;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        
        .light-theme .close-btn {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .close-btn:active {
            transform: scale(0.9);
        }
        
        .info-body {
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 15px;
            position: relative;
            z-index: 1;
        }
        
        .info-body h4 {
            margin: 20px 0 10px;
            color: var(--text-primary);
            font-weight: 700;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .info-body ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .info-body li {
            margin: 8px 0;
        }
        
        .info-modal.show {
            display: flex;
            animation: modalFadeIn 0.2s ease;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* Анимация появления элементов */
        .fade-in {
            opacity: 0;
            transform: translateY(15px);
            animation: fadeIn 0.4s ease forwards;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* PWA Install Button */
        .install-btn {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            z-index: 1001;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .install-btn:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }
        
        .install-btn:active {
            transform: translateX(-50%) scale(0.98);
        }
        
        .install-btn-desktop {
            position: fixed;
            bottom: 30px;
            right: 100px;
            width: 60px;
            height: 60px;
            background: var(--accent-gradient);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 
                0 10px 25px rgba(124, 58, 237, 0.4),
                0 0 20px rgba(124, 58, 237, 0.2);
            border: 2px solid var(--border-color);
            backdrop-filter: blur(20px);
            z-index: 100;
            transition: all 0.2s ease;
        }
        
        .install-btn-desktop:active {
            transform: scale(0.95);
        }
        
        .install-btn-desktop i {
            font-size: 28px;
            color: #ffffff;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            z-index: 3000;
            animation: slideUp 0.3s ease;
            font-weight: 500;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, 20px);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }
        
        /* Поддержка уменьшения анимаций */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            
            .particles {
                display: none;
            }
            
            header::before,
            .result::before,
            .remaining::before,
            .result-secondary::before {
                animation: none;
            }
        }
    </style>
</head>
<body>
    <!-- Частицы фона -->
    <div class="particles" id="particles"></div>
    
    <header class="fade-in">
        <span class="icon">🧪</span>
        <span>Ximik</span>
    </header>
    
    <div class="container fade-in">
        <div class="tabs">
            <button class="tab active" onclick="switchTab('tab1')">
                <span class="icon">🧪</span>
                <span>1.01-1.18</span>
            </button>
            <button class="tab" onclick="switchTab('tab2')">
                <span class="icon">⚗️</span>
                <span>1.19-1.48</span>
            </button>
        </div>
        <div id="tab1" class="tab-content active">
            <h2>
                <span class="icon">🧪</span>
                <span>Выдача раствора от 1.01 до 1.18</span>
            </h2>
            
            <label for="density1">
                <span class="icon">📊</span>
                <span>Плотность раствора:</span>
            </label>
            <select id="density1">
                <option value="1">1.01</option>
                <option value="2">1.02</option>
                <option value="3">1.03</option>
                <option value="4">1.04</option>
                <option value="5">1.05</option>
                <option value="6">1.06</option>
                <option value="7">1.07</option>
                <option value="8">1.08</option>
                <option value="9">1.09</option>
                <option value="10">1.10</option>
                <option value="11">1.11</option>
                <option value="12">1.12</option>
                <option value="13">1.13</option>
                <option value="14">1.14</option>
                <option value="15">1.15</option>
                <option value="16">1.16</option>
                <option value="17">1.17</option>
                <option value="18">1.18</option>
            </select>
            
            <label for="volume1">
                <span class="icon">📏</span>
                <span>Объём раствора (л):</span>
            </label>
            <select id="volume1">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
            </select>
            
            <div class="result" id="result1">
                <span class="icon">💧</span>
                <span>1.18: 0.056 л</span>
            </div>
            <div class="remaining" id="remaining1">
                <span class="icon">💧</span>
                <span>Вода: 0 л</span>
            </div>
        </div>
        <div id="tab2" class="tab-content">
            <h2>
                <span class="icon">⚗️</span>
                <span>Выдача раствора от 1.19 до 1.48</span>
            </h2>
            
            <label for="densityValue">
                <span class="icon">📊</span>
                <span>Плотность раствора:</span>
            </label>
            <select id="densityValue">
                <option value="1.19">1.19</option>
                <option value="1.20">1.20</option>
                <option value="1.21">1.21</option>
                <option value="1.22">1.22</option>
                <option value="1.23">1.23</option>
                <option value="1.24">1.24</option>
                <option value="1.25">1.25</option>
                <option value="1.26">1.26</option>
                <option value="1.27">1.27</option>
                <option value="1.28">1.28</option>
                <option value="1.29">1.29</option>
                <option value="1.30">1.30</option>
                <option value="1.31">1.31</option>
                <option value="1.32">1.32</option>
                <option value="1.33">1.33</option>
                <option value="1.34">1.34</option>
                <option value="1.35">1.35</option>
                <option value="1.36">1.36</option>
                <option value="1.37">1.37</option>
                <option value="1.38">1.38</option>
                <option value="1.39">1.39</option>
                <option value="1.40">1.40</option>
                <option value="1.41">1.41</option>
                <option value="1.42">1.42</option>
                <option value="1.43">1.43</option>
                <option value="1.44">1.44</option>
                <option value="1.45">1.45</option>
                <option value="1.46">1.46</option>
                <option value="1.47">1.47</option>
                <option value="1.48">1.48</option>
            </select>
            
            <label for="volume2">
                <span class="icon">📏</span>
                <span>Объём раствора (л):</span>
            </label>
            <select id="volume2">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
            </select>
            
            <div class="result" id="result3">
                <span class="icon">💧</span>
                <span>1.18: 0.000 л</span>
            </div>
            <div class="result-secondary" id="resultSecondary">
                <span class="icon">⚗️</span>
                <span>1.48: 0.000 л</span>
            </div>
        </div>
        <div class="author">
            <span class="icon">👨‍🔬</span>
            <span>© Горшковский РУС  УХПП ЦЕХ № 4</span>
        </div>
    </div>
    
    <!-- Мобильная панель управления -->
    <div class="mobile-controls">
        <button class="mobile-btn" onclick="toggleTheme()" title="Переключить тему">
            <span id="theme-icon">🌙</span>
        </button>
        <button class="mobile-btn" onclick="openInfoModal()" title="Информация">
            <span>ℹ️</span>
        </button>
        <button class="mobile-btn" id="installBtn" onclick="installPWA()" title="Установить" style="display: none;">
            <span>📱</span>
        </button>
    </div>
    
    <!-- Десктопные кнопки -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Переключить тему">
        <i id="theme-icon-desktop">🌙</i>
    </button>
    
    <button class="info-btn" onclick="openInfoModal()">
        <i>ℹ️</i>
    </button>
    
    <button class="install-btn-desktop" onclick="installPWA()" title="Установить приложение" style="display: none;">
        <i>📱</i>
    </button>
    
    <div class="info-modal" id="infoModal">
        <div class="info-content">
            <div class="info-header">
                <h3>
                    <span class="icon">📋</span>
                    <span>Информация о приложении</span>
                </h3>
                <button class="close-btn" onclick="closeInfoModal()">×</button>
            </div>
            <div class="info-body">
                <h4>
                    <span class="icon">🔬</span>
                    <span>О приложении</span>
                </h4>
                <p>Ximik - это инструмент для расчёта объёмов растворов различной плотности</p>
                
                <h4>
                    <span class="icon">👥</span>
                    <span>Разработчики</span>
                </h4>
                <ul>
                    <li><strong>УХПП ЦЕХ № 4 Горшковский РУС</strong> - основной разработчик и автор идеи</li>
                </ul>
                
                <h4>
                    <span class="icon">🏷️</span>
                    <span>Версия</span>
                </h4>
                <p>v2.0</p>
                
                <h4>
                    <span class="icon">📅</span>
                    <span>Дата выпуска</span>
                </h4>
                <p>2025</p>
                
                <h4>
                    <span class="icon">✨</span>
                    <span>Особенности</span>
                </h4>
                <ul>
                    <li>Два режима расчета для разных диапазонов плотности</li>
                    <li>Интуитивно понятный интерфейс</li>
                    <li>Точный расчет объемов компонентов</li>
                    <li>Адаптивный дизайн для всех устройств</li>
                    <li>Современные визуальные эффекты</li>
                    <li>Переключение между светлой и темной темой</li>
                    <li>Наглядные иконки для всех элементов</li>
                    <li>Оптимизация для мобильных устройств</li>
                    <li>Возможность установки на устройство</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // Создание частиц фона (уменьшенное количество)
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const isMobile = window.innerWidth <= 768;
            const particleCount = isMobile ? 8 : 15;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Случайные параметры
                const size = Math.random() * 2 + 1;
                const posX = Math.random() * 100;
                const delay = Math.random() * 20;
                const duration = Math.random() * 10 + 20;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${posX}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                particlesContainer.appendChild(particle);
            }
        }
        
        // Функция для форматирования объема в кубы и литры
        function formatVolume(volume) {
            const cubes = Math.floor(volume);
            const liters = Math.round((volume - cubes) * 1000);
            
            if (cubes === 0 && liters === 0) return "0 л";
            if (cubes === 0) return `${liters} л`;
            if (liters === 0) return `${cubes} куб`;
            return `${cubes} куб ${liters} л`;
        }
        
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
            
            if (tabId === 'tab1') {
                calculate1();
            } else {
                calculate2();
            }
            
            // Тактильная обратная связь для мобильных
            if ('vibrate' in navigator) {
                navigator.vibrate(30);
            }
        }
        
        // Первая вкладка - расчеты для диапазона 1.01-1.18
        const densitySelect1 = document.getElementById('density1');
        const volumeSelect1 = document.getElementById('volume1');
        const result1Element = document.getElementById('result1');
        const remainingElement1 = document.getElementById('remaining1');
        
        function calculate1() {
            const density = parseFloat(densitySelect1.value) || 0;
            const volume = parseFloat(volumeSelect1.value) || 0;
            
            const result1 = (1/18) * density * volume;
            const remaining = volume - result1;
            
            result1Element.innerHTML = `<span class="icon">💧</span><span>1.18: ${formatVolume(result1)}</span>`;
            remainingElement1.innerHTML = `<span class="icon">💧</span><span>Вода: ${formatVolume(remaining)}</span>`;
        }
        
        densitySelect1.addEventListener('change', calculate1);
        volumeSelect1.addEventListener('change', calculate1);
        
        // Вторая вкладка - расчеты для диапазона 1.19-1.48
        const densityValueSelect = document.getElementById('densityValue');
        const volumeSelect2 = document.getElementById('volume2');
        const result3Element = document.getElementById('result3');
        const resultSecondaryElement = document.getElementById('resultSecondary');
        
        function calculate2() {
            const firstValue = 1.48;
            const divider = 0.3;
            const secondValue = parseFloat(densityValueSelect.value);
            const volume = parseFloat(volumeSelect2.value);
            
            if (isNaN(secondValue) || isNaN(volume)) {
                result3Element.innerHTML = '<span class="icon">💧</span><span>1.18: Выберите корректные значения</span>';
                resultSecondaryElement.innerHTML = '<span class="icon">⚗️</span><span>1.48: Оставшиеся кубы появятся здесь</span>';
                return;
            }
            
            if (divider === 0) {
                result3Element.innerHTML = '<span class="icon">💧</span><span>1.18: Ошибка: деление на ноль</span>';
                resultSecondaryElement.innerHTML = '<span class="icon">⚗️</span><span>1.48: Оставшиеся кубы появятся здесь</span>';
                return;
            }
            
            const difference = firstValue - secondValue;
            const result = (difference / divider) * volume;
            const remainingCubes = volume - result;
            
            result3Element.innerHTML = `<span class="icon">💧</span><span>1.18: ${formatVolume(result)}</span>`;
            resultSecondaryElement.innerHTML = `<span class="icon">⚗️</span><span>1.48: ${formatVolume(remainingCubes)}</span>`;
        }
        
        densityValueSelect.addEventListener('change', calculate2);
        volumeSelect2.addEventListener('change', calculate2);
        
        // Модальное окно
        function openInfoModal() {
            document.getElementById('infoModal').classList.add('show');
            // Тактильная обратная связь
            if ('vibrate' in navigator) {
                navigator.vibrate(30);
            }
        }
        
        function closeInfoModal() {
            document.getElementById('infoModal').classList.remove('show');
        }
        
        // Закрытие модального окна при клике вне его содержимого
        document.getElementById('infoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeInfoModal();
            }
        });
        
        // Переключение темы
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            const themeIconDesktop = document.getElementById('theme-icon-desktop');
            
            if (body.classList.contains('light-theme')) {
                body.classList.remove('light-theme');
                themeIcon.textContent = '🌙';
                themeIconDesktop.textContent = '🌙';
                localStorage.setItem('theme', 'dark');
            } else {
                body.classList.add('light-theme');
                themeIcon.textContent = '☀️';
                themeIconDesktop.textContent = '☀️';
                localStorage.setItem('theme', 'light');
            }
            
            // Тактильная обратная связь
            if ('vibrate' in navigator) {
                navigator.vibrate(30);
            }
        }
        
        // PWA Installation
        let deferredPrompt;
        
        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                        showNotification('Приложение устанавливается...');
                    }
                    deferredPrompt = null;
                    document.getElementById('installBtn').style.display = 'none';
                    document.querySelector('.install-btn-desktop').style.display = 'none';
                });
            } else {
                showNotification('Установка недоступна в этом браузере');
            }
        }
        
        // Show notification
        function showNotification(message, duration = 3000) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }
        
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('data:application/javascript;base64,Y29uc3QgQ0FDSEVfTkFNRSA9ICdzb2x1dGlvbi1jYWxjdWxhdG9yLXYxJzsKY29uc3QgdXJsclRvQ2FjaGUgPSBbCiAgJy8nLAogICcvaW5kZXguaHRtbCcsCiAgJy9zdHlsZS5jc3MnLAogICcvc2NyaXB0LmpzJywKICAnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDMwMCw0MDAsNTAwLDYwMCw3MDAsODAwJmRpc3BsYXk9c3dhcCcKXTsKCmFkZEV2ZW50TGlzdGVuZXIoJ2luc3RhbGwnLCAoZXZlbnQpID0+IHsKICBldmVudC53YWl0VW50aWwoCiAgICBjYWNoZXMub3BlbihDQUNIRV9OQU1FKQogICAgICAudGhlbihjYWNoZSA9PiB7CiAgICAgICAgcmV0dXJuIGNhY2hlLmFkZEFsbCh1cmxslG9DYWNoZSk7CiAgICAgIH0pCiAgKTsKfSk7CgphZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIChldmVudCkgPT4gewogIGV2ZW50LnJlc3BvbmRXaXRoKAogICAgY2FjaGVzLm1hdGNoKGV2ZW50LnJlcXVlc3QpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgZmV0Y2goZXZlbnQucmVxdWVzdCk7CiAgICAgIH0pCiAgKTsKfSk7')
                .then(registration => {
                  console.log('ServiceWorker registration successful with scope: ', registration.scope);
                })
                .catch(error => {
                  console.log('ServiceWorker registration failed: ', error);
                });
              });
            }
            
            // PWA Install Prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                // Показываем кнопку для мобильных устройств
                document.getElementById('installBtn').style.display = 'flex';
                
                // Показываем кнопку для десктопа
                const desktopInstallBtn = document.querySelector('.install-btn-desktop');
                if (desktopInstallBtn) {
                    desktopInstallBtn.style.display = 'flex';
                }
                
                // Показываем всплывающую кнопку
                const installButton = document.createElement('button');
                installButton.className = 'install-btn';
                installButton.innerHTML = '📱 Установить приложение';
                
                installButton.addEventListener('click', () => {
                    installButton.style.display = 'none';
                    installPWA();
                });
                
                document.body.appendChild(installButton);
                
                // Автоматически скрываем через 10 секунд
                setTimeout(() => {
                    installButton.style.opacity = '0';
                    setTimeout(() => installButton.remove(), 300);
                }, 10000);
            });
            
            window.addEventListener('appinstalled', () => {
                console.log('PWA was installed');
                showNotification('Приложение успешно установлено!');
                
                // Скрываем все кнопки установки
                document.getElementById('installBtn').style.display = 'none';
                const desktopInstallBtn = document.querySelector('.install-btn-desktop');
                if (desktopInstallBtn) {
                    desktopInstallBtn.style.display = 'none';
                }
                
                // Удаляем всплывающую кнопку если она есть
                const installBtn = document.querySelector('.install-btn');
                if (installBtn) {
                    installBtn.remove();
                }
            });
        
        // Инициализация при загрузке страницы
        window.addEventListener('load', () => {
            createParticles();
            calculate1();
            calculate2();
            
            // Восстановление сохраненной темы
            const savedTheme = localStorage.getItem('theme');
            const themeIcon = document.getElementById('theme-icon');
            const themeIconDesktop = document.getElementById('theme-icon-desktop');
            
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                themeIcon.textContent = '☀️';
                themeIconDesktop.textContent = '☀️';
            } else {
                themeIcon.textContent = '🌙';
                themeIconDesktop.textContent = '🌙';
            }
            
            // Проверяем, запущено ли приложение в режиме PWA
            if (window.matchMedia('(display-mode: standalone)').matches || 
                window.navigator.standalone === true) {
                console.log('Running in standalone mode');
            }
            
            // Анимация появления элементов
            document.querySelectorAll('.fade-in').forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 50);
            });
            
            // Предотвращение двойного тапа для увеличения на iOS
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function (event) {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
        });
        
        // Обработка изменения ориентации экрана
        window.addEventListener('orientationchange', () => {
            // Пересоздаем частицы при изменении ориентации
            document.getElementById('particles').innerHTML = '';
            createParticles();
        });
    </script>
</body>
</html>
